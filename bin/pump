#!/usr/bin/env ruby

require 'rubygems'
require 'pump'

abort "Currently support only Mac OS platform" unless Pump.mac?

case ARGV.first
when "install"
  abort "Usage: #{Pump.sudo} pump install" unless Pump.superuser_rights?
  [Pump::Install::Common, Pump::Install::MasqDNS, Pump::Install::RackHTTP].each(&:install)
  exit
when "uninstall"
  abort "Usage: #{Pump.sudo} pump uninstall" unless Pump.superuser_rights?
  [Pump::Install::MasqDNS, Pump::Install::Common, Pump::Install::RackHTTP].each(&:uninstall)
  exit
when "masqdnsd"
  Pump.masqdnsd
when "rackhttpd"
  Pump.rackhttpd
when "version"
  puts Pump::VERSION; exit
else
  puts "Usage: pump #{%w{ install uninstall version }.join(' | ')}"
end
